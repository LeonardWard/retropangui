#!/usr/bin/env bash

# =======================================================
# Retro Pangui Platform Configuration - x86_64
# 파일명: platforms/x86_64.conf
# 설명: x86_64 아키텍처 전용 설정
# =======================================================

# --- RetroArch 버전 설정 ---
# 안정 버전 사용 (필요시 특정 태그 지정)
RA_VERSION=""           # 빈 값 = 최신 master
RA_BRANCH="master"

# --- 활성화 코어 목록 ---
# x86_64는 성능이 좋으므로 거의 모든 코어 활성화
PLATFORM_ENABLED_CORES=(
    "${COMMON_ENABLED_CORES[@]}"
    "lr-pcsx-rearmed"       # PlayStation 1
    "lr-ppsspp"             # PSP
    "lr-dolphin"            # GameCube/Wii
    "lr-citra"              # Nintendo 3DS
    "lr-mupen64plus-next"   # Nintendo 64
)

# --- 비활성화 코어 목록 ---
PLATFORM_DISABLED_CORES=()

# --- 빌드 옵션 ---
# x86_64 네이티브 최적화
PLATFORM_CFLAGS="-march=native -mtune=native"
PLATFORM_LDFLAGS=""
PLATFORM_MAKEFLAGS="-j$(nproc)"

# --- GPU 백엔드 설정 ---
USE_OPENGL="yes"
USE_VULKAN="yes"        # x86_64는 Vulkan 지원
USE_KMS="yes"
USE_WAYLAND="no"
USE_X11="yes"           # x11 모드 지원

# --- 최적화 레벨 ---
OPT_LEVEL="-O3"

# --- RetroArch configure 옵션 ---
RA_CONFIGURE_OPTS=(
    "--prefix=$INSTALL_ROOT_DIR"
    "--disable-wayland"
    "--enable-opengl"
    "--enable-vulkan"
    "--enable-x11"
    "--enable-kms"
    "--enable-udev"
    "--enable-alsa"
    "--enable-threads"
    "--enable-ffmpeg"
    "--enable-7zip"
    "--enable-sdl2"
)
